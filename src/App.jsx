import React,{useEffect,useState} from "react";import axios from "axios";
const API=import.meta.env.VITE_API_BASE_URL||"http://localhost:5050";const WA=import.meta.env.VITE_WHATSAPP_NUMBER||"244936777484";
export default function App(){const [catalog,setCatalog]=useState([]);const [error,setError]=useState("");const [loading,setLoading]=useState(true);
useEffect(()=>{axios.get(`${API}/api/catalog`).then(r=>setCatalog(r.data?.items||r.data||[])).catch(()=>setError("Não foi possível carregar o catálogo. Verifique a API.")).finally(()=>setLoading(false));},[]);
return(<main style={{padding:20,color:"#fff",background:"#0b0b0b",minHeight:"100vh"}}><h1>Allô Kapri · Catálogo</h1><div style={{opacity:.8}}>API: {API}</div>{loading&&<div style={{marginTop:12}}>A carregar…</div>}{error&&<div style={{background:"#331",padding:10,marginTop:12}}>{error}</div>}<div style={{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:16,marginTop:16}}>{catalog.map((p,i)=>{const msg=encodeURIComponent(`Olá! Quero encomendar: ${p?.name||p?.model} (${p?.sku||""})`);const href=`https://wa.me/${WA}?text=${msg}`;return(<div key={i} style={{background:"#151515",border:"1px solid #222",borderRadius:12,padding:12}}><div style={{fontWeight:700}}>{p?.name||p?.model||"Produto"}</div>{p?.price?<div style={{opacity:.8,margin:"6px 0"}}>Desde {p.price}</div>:null}<a href={href} target="_blank" rel="noopener noreferrer" style={{display:"inline-block",padding:"8px 12px",background:"#f96b09",borderRadius:8,color:"#000",fontWeight:700}}>Encomendar</a></div>);})}</div></main>);}
